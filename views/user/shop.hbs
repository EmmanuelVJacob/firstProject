<main>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        /* Add custom CSS */
        .navbar .nav-item .nav-link.active {
            border-bottom: 2px solid red;
        }
    </style>
  <!-- Hero Area Start-->
  <!-- Hero Area End-->
  <!-- Latest Products Start -->
  <section class="popular-items latest-padding">
    <div class="container">
      <div class="row product-btn justify-content-between mb-40">
        <div class="properties__button">
          <!--Nav Button  -->
      <nav class="navbar navbar-light ">
 <nav class="navbar navbar-expand-lg navbar-light ">
       {{#each category}}
       {{#if listed}}
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/categoryFilter/{{this.category}}">{{this.category}}</a>
                </li>
                
            </ul>
        </div>
        {{/if}}
        {{/each}}
    </nav>
   
   
</nav>

          <!--End Nav Button  -->
        </div>
        <!-- Grid and List view -->
        <div class="grid-list-view">
        </div>
        <!-- Select items -->
       
      </div>
      <!-- Nav Card -->
      <div class="tab-content" id="nav-tabContent">
        <!-- card one -->
        <div
          class="tab-pane fade show active"
          id="nav-home"
          role="tabpanel"
          aria-labelledby="nav-home-tab"
        >
          <div class="row">
            {{#each productData}}
              <div class="col-xl-4 col-lg-4 col-md-6 col-sm-6">
                <div class="single-popular-items mb-50 text-center">
                  <div class="popular-img mb-3">
                    <div class="w-75 p-3">
                      <a href="/product/{{this._id}}">
                        <img src="{{this.images.[0]}}" alt="" />

                      </a>

                    </div>

                    <div class="img-cap">
                      <a onclick="addToCart('{{this._id}}')">
                        <span>Add to cart</span>
                      </a>

                    </div>
                    <div class="favorit-items">
                      <span class="flaticon-heart"></span>
                    </div>
                  </div>
                  <div class="popular-caption">
                    <h3><a href="product_details.html">{{this.name}}</a></h3>
                    <span>â‚¹ {{this.price}}</span>
                  </div>
                </div>
              </div>
            {{/each}}

          </div>
        </div>
<!-- Page Add Section End -->
 {{#each arr}}

  <a href="?page={{this}}">
    <button style="border-radius:40%;margin-left:3rem;color:black;">
    {{this}}
    </button>
    </a>


    {{/each}}
      <!-- End Nav Card -->
    </div>
    
   
  </section>
  <!-- Latest Products End -->
  <!--? Shop Method Start-->
  <div class="shop-method-area">
    <div class="container">
      <div class="method-wrapper">
        <div class="row d-flex justify-content-between">
          <div class="col-xl-4 col-lg-4 col-md-6">
            <div class="single-method mb-40">
              <i class="ti-package"></i>
              <h6>Free Shipping Method</h6>
              <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
            </div>
          </div>
          <div class="col-xl-4 col-lg-4 col-md-6">
            <div class="single-method mb-40">
              <i class="ti-unlock"></i>
              <h6>Secure Payment System</h6>
              <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
            </div>
          </div>
          <div class="col-xl-4 col-lg-4 col-md-6">
            <div class="single-method mb-40">
              <i class="ti-reload"></i>
              <h6>Secure Payment System</h6>
              <p>aorem ixpsacdolor sit ameasecur adipisicing elitsf edasd.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Shop Method End-->
</main>



<script>
  function addToCart(productId) {
    axios
      .get(`/addToCart/${productId}`)
      .then((response) => {
        if (response.status) {
          Toastify({
            text: `${response.data.message}`,
            duration: 3000,
            className: "info",
            gravity: "bottom",
            position: "center",
            style: {
              background: "linear-gradient(109.6deg, rgba(0, 0, 0, 0.93) 11.2%, rgb(63, 61, 61) 78.9%)",
            },
          }).showToast();
        }
      })
      .catch((err) => {
        Toastify({
          text: "Product is not added to cart",
          duration: 3000,
          gravity: "bottom",
          position: "center",
          backgroundColor: "linear-gradient(109.6deg, rgba(0, 0, 0, 0.93) 11.2%, rgb(63, 61, 61) 78.9%)",
          stopOnFocus: true,
          close: true,
          className: "toastify-info",
        }).showToast();
      });
  }
</script>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    
    <script>
        // Add active class to clicked navigation item
        $(document).ready(function() {
            $(".navbar-nav .nav-link").click(function() {
                $(".navbar-nav .nav-link").removeClass("active");
                $(this).addClass("active");
            });
        });
    </script>

  